<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Road Sign Quiz</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <style>
    .option {
      @apply border rounded-lg px-4 py-2 mb-2 text-left;
    }
    .option.correct { background-color: #c6f6d5; }
    .option.incorrect { background-color: #fed7d7; }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-100 to-purple-200 text-gray-900 flex flex-col items-center justify-center min-h-screen p-4">
  <div class="w-full max-w-md bg-white shadow-2xl rounded-2xl p-6">
    <div id="start-screen">
      <h1 class="text-2xl font-bold mb-4 text-center">Welcome to the Road Sign Quiz!</h1>
      <label class="block mb-4 text-center">
        How many questions would you like?
        <input id="question-count" type="number" min="1" max="616" value="10" class="mt-2 p-2 border rounded w-full text-center" />
      </label>
      <button onclick="startQuiz()" class="w-full bg-blue-600 text-white py-2 rounded-lg">Start Quiz</button>
    </div>

    <div id="quiz-container" class="hidden">
      <img id="sign-image" class="w-full h-48 object-contain mb-4" src="" alt="Sign" />
      <p id="question-text" class="text-lg font-semibold mb-4"></p>
      <div id="options-container" class="space-y-2"></div>
      <button id="next-btn" class="mt-4 w-full bg-blue-600 text-white py-2 rounded-lg hidden">Next</button>
    </div>

    <div id="score-screen" class="hidden text-center">
      <h2 class="text-2xl font-bold mb-4">Quiz Completed!</h2>
      <p id="score-text" class="text-lg mb-4"></p>
      <button onclick="restartQuiz()" class="bg-green-600 text-white py-2 px-4 rounded-lg">Restart</button>
    </div>
  </div>

  <script>
    const fullQuizData = [
      // Full 616 items auto-generated from CSV (only 5 shown below for brevity)
      { image: "513.1.jpg", question: "What does this sign mean?", correct: "Adverse camber on a bend or roundabout", options: ["Migratory toad crossing ahead","Adverse camber on a bend or roundabout","Drivers should keep in low gear for 1.5 miles","T-junction ahead (right)"] },
      { image: "512L.jpg", question: "What does this sign mean?", correct: "Bend ahead to the left", options: ["Bend ahead to the left","Sheep likely to be in road ahead","Cattle likely to be in road ahead","Roundabout"] },
      { image: "512.jpg", question: "What does this sign mean?", correct: "Bend ahead to the right", options: ["Instructions to horse riders above the push button control for an equestrian traffic crossing","Bend ahead to the right","Goods vehicles may be directed to enter a check point ahead","Goods vehicles should get into the left hand lane of a three lane carriageway on the approach to a goods vehicle check point"] },
      { image: "504.1.jpg", question: "What does this sign mean?", correct: "Crossroads ahead", options: ["Wild fowl likely to be in road ahead","Crossroads ahead","Drivers should engage low gear for steep hill","Traffic merges ahead from the left"] },
      { image: "504.1R.jpg", question: "What does this sign mean?", correct: "Crossroads ahead", options: ["Wild fowl likely to be in road ahead","Crossroads ahead","Drivers should engage low gear for steep hill","Traffic merges ahead from the left"] },
      // ...additional 611 entries would be added here
    ];

    let quizData = [];
    let current = 0;
    let score = 0;

    const signImage = document.getElementById("sign-image");
    const questionText = document.getElementById("question-text");
    const optionsContainer = document.getElementById("options-container");
    const nextBtn = document.getElementById("next-btn");
    const scoreScreen = document.getElementById("score-screen");
    const quizContainer = document.getElementById("quiz-container");
    const startScreen = document.getElementById("start-screen");
    const scoreText = document.getElementById("score-text");

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function startQuiz() {
      const count = parseInt(document.getElementById("question-count").value);
      quizData = shuffle([...fullQuizData]).slice(0, count);
      current = 0;
      score = 0;
      startScreen.classList.add("hidden");
      quizContainer.classList.remove("hidden");
      loadQuestion();
    }

    function loadQuestion() {
      const q = quizData[current];
      signImage.src =  q.image;
      questionText.textContent = q.question;
      optionsContainer.innerHTML = "";

      shuffle(q.options).forEach(opt => {
        const btn = document.createElement("button");
        btn.textContent = opt;
        btn.className = "option w-full bg-gray-200 hover:bg-gray-300";
        btn.onclick = () => selectOption(btn, opt === q.correct);
        optionsContainer.appendChild(btn);
      });

      nextBtn.classList.add("hidden");
    }

    function selectOption(button, isCorrect) {
      Array.from(optionsContainer.children).forEach(btn => {
        btn.disabled = true;
        if (btn.textContent === quizData[current].correct) {
          btn.classList.add("correct");
        } else if (btn === button) {
          btn.classList.add("incorrect");
        }
      });

      if (isCorrect) score++;
      nextBtn.classList.remove("hidden");
    }

    nextBtn.onclick = () => {
      current++;
      if (current < quizData.length) {
        loadQuestion();
      } else {
        quizContainer.classList.add("hidden");
        scoreScreen.classList.remove("hidden");
        scoreText.textContent = `You scored ${score} out of ${quizData.length}`;
      }
    };

    function restartQuiz() {
      startScreen.classList.remove("hidden");
      scoreScreen.classList.add("hidden");
      quizContainer.classList.add("hidden");
    }
  </script>
</body>
</html>
